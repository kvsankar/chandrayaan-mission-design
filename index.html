<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chandrayaan-3 Orbit Visualization</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="container"></div>

    <div id="legend-panel">
        <h3 onclick="toggleLegend()" style="cursor: pointer;">Legend <span id="legend-toggle">▼</span></h3>
        <div id="legend-content">
            <div class="legend-section">
                <strong>Axes:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff0000;"></span> X-Axis (♈︎ RA=0°)</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #00ff00;"></span> Y-Axis (RA=90°)</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #0000ff;"></span> Z-Axis (North Pole)</span>
            </div>
            <div class="legend-section">
                <strong>Reference:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffffff;"></span> Equator</span>
            </div>
            <div class="legend-section">
                <strong>Lunar Orbit:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff00ff;"></span> Orbital Plane</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #00ffff;"></span> Ascending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff8800;"></span> Descending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #aaaaaa;"></span> Moon</span>
            </div>
            <div class="legend-section">
                <strong>Chandrayaan Orbit:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffff00;"></span> Orbital Plane</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffa500;"></span> Orbit Path</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #88ff88;"></span> Ascending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff88ff;"></span> Descending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffffff;"></span> Spacecraft</span>
            </div>
        </div>
    </div>

    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.152.2/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.152.2/examples/jsm/",
            "astronomy-engine": "https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/+esm"
        }
    }
    </script>

    <div id="timeline-panel" class="disabled">
        <div id="timeline-mode-message">Switch to Real mode to use timeline</div>
        <div id="timeline-controls">
            <div class="timeline-row">
                <label for="start-date">Start Date/Time:</label>
                <input type="datetime-local" id="start-date" />
            </div>
            <div class="timeline-row">
                <label for="timeline-slider">Timeline:</label>
                <input type="range" id="timeline-slider" min="0" max="90" value="0" step="0.1" />
                <span id="current-date"></span>
            </div>
            <div class="timeline-row">
                <button id="play-pause-btn">▶ Play</button>
                <button id="reset-btn">↺ Reset</button>
                <label for="playback-speed">Speed:</label>
                <select id="playback-speed">
                    <option value="5">5 days/sec</option>
                    <option value="2">2 days/sec</option>
                    <option value="1">1 day/sec</option>
                    <option value="0.5">12 hr/sec</option>
                    <option value="0.25" selected>6 hr/sec</option>
                    <option value="0.125">3 hr/sec</option>
                    <option value="0.041667">1 hr/sec</option>
                    <option value="0.020833">30 min/sec</option>
                    <option value="0.006944">10 min/sec</option>
                    <option value="0.000694">1 min/sec</option>
                    <option value="0.000011574">Realtime</option>
                </select>
            </div>
        </div>
    </div>

    <script type="module" src="main.js"></script>
    <script>
        function toggleLegend() {
            const content = document.getElementById('legend-content');
            const toggle = document.getElementById('legend-toggle');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.textContent = '▼';
            } else {
                content.style.display = 'none';
                toggle.textContent = '▶';
            }
        }
    </script>
</body>
</html>
