<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chandrayaan-3 Explorer</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>
    <div id="container"></div>

    <!-- Collapse buttons for panels -->
    <button id="gui-collapse-btn" title="Toggle Controls Panel">»</button>

    <!-- View preset buttons -->
    <div id="view-buttons">
        <button class="view-btn" data-view="oblique" title="Oblique View (default)">3D</button>
        <button class="view-btn" data-view="top" title="Top View (North Pole)">Top</button>
        <button class="view-btn" data-view="side" title="Side View (Equatorial)">Side</button>
        <button class="view-btn" data-view="front" title="Front View">Front</button>
    </div>

    <div id="legend-panel">
        <h3 onclick="toggleLegend()" style="cursor: pointer;">Legend <span id="legend-toggle">▼</span></h3>
        <div id="legend-content">
            <div class="legend-section">
                <strong>Axes:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff0000;"></span> X-Axis (♈︎ RA=0°)</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #00ff00;"></span> Y-Axis (RA=90°)</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #0000ff;"></span> Z-Axis (North Pole)</span>
            </div>
            <div class="legend-section">
                <strong>Reference:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffffff;"></span> Equator</span>
            </div>
            <div class="legend-section">
                <strong>Lunar Orbit:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff00ff;"></span> Orbital Plane</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #00ffff;"></span> Ascending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff8800;"></span> Descending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #aaaaaa;"></span> Moon</span>
            </div>
            <div class="legend-section">
                <strong>Chandrayaan Orbit:</strong>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffff00;"></span> Orbital Plane</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffff00;"></span> Orbit Path (dashed)</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #88ff88;"></span> Ascending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ff88ff;"></span> Descending Node</span>
                <span class="legend-item"><span class="legend-color" style="background-color: #ffffff;"></span> Spacecraft</span>
            </div>
        </div>
    </div>

    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.152.2/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.152.2/examples/jsm/",
            "astronomy-engine": "https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/+esm"
        }
    }
    </script>

    <script type="module" src="src/explorer.ts"></script>
    <script>
        function toggleLegend() {
            const content = document.getElementById('legend-content');
            const toggle = document.getElementById('legend-toggle');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.textContent = '▼';
            } else {
                content.style.display = 'none';
                toggle.textContent = '▶';
            }
        }
    </script>
</body>
</html>
